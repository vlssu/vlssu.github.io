import{_ as a,o as s,c as e,f as n}from"./app-df2acf2e.js";const i={},l=n(`<h2 id="首次部署时" tabindex="-1"><a class="header-anchor" href="#首次部署时" aria-hidden="true">#</a> 首次部署时</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker /var/lib/docker
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /data/docker /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="已有数据迁移时" tabindex="-1"><a class="header-anchor" href="#已有数据迁移时" aria-hidden="true">#</a> 已有数据迁移时</h2><ol><li>暂停docker服务</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl stop <span class="token function">docker</span>

<span class="token comment"># 查看dokcer服务是否停止完毕</span>
systemctl status <span class="token function">docker</span>
<span class="token function">ps</span> <span class="token parameter variable">-fe</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>拷贝/var/lib目录到挂载目录</li></ol><p>挂载目录以<code>/data</code>为例</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> /var/lib/docker /data/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>备份原有数据</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mv</span> /var/lib/docker /var/lib/docker_bk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>创建软链接</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> /data/docker /var/lib/docker

<span class="token comment"># 查看软链接是否生效</span>
ll /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>启动docker服务</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>查看容器是否正常拉起</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>删掉备份目录</li></ol><p>如果迁移成功，可以删除备份的目录</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker_bk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,19),d=[l];function r(c,t){return s(),e("div",null,d)}const p=a(i,[["render",r],["__file","230831.html.vue"]]);export{p as default};
