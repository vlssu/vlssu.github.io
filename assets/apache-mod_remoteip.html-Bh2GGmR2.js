import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,o as n}from"./app-B0ruJ7sK.js";const t={};function l(h,i){return n(),e("div",null,i[0]||(i[0]=[a(`<p>当网站启用 CDN 会给获取访客 IP 带来障碍，由于多了个代理流程，故日志记录 IP 变为 CDN 的 IP。基于 Apache 的网站要解决这个问题，需要使用以下模块通过 HTTP 标头里的 <code>X_FORWARDED_FOR</code> 字段获取访客 IP</p><ul><li>mod_remoteip</li><li>mod_rpaf</li></ul><h2 id="mod-remoteip-模块" tabindex="-1"><a class="header-anchor" href="#mod-remoteip-模块"><span>mod_remoteip 模块</span></a></h2><h3 id="apache-2-4" tabindex="-1"><a class="header-anchor" href="#apache-2-4"><span>Apache 2.4</span></a></h3><p><code>Apache 2.4</code> 开始自带此模块，可用下面命令检查。</p><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 查询 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Apache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 版本</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.d/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">httpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 查询 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Apache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 编译信息（可查看 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">httpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.conf 配置文件等路径，之后修改要知道）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.d/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">httpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">V</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 列出 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Apache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 加载模块（里面有 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">remoteip_module</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 就说明已启用 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">mod_remoteip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 模块）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.d/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">httpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">D</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> DUMP_MODULES</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 查看 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Apache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 选项帮助</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.d/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">httpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>有些情况可能是安装了模块，但默认没有启用。这样可以通过查看 <code>httpd.conf</code> 配置文件确认，里面有下面这行则表示已安装 <code>mod_remoteip</code> 模块，取消行注释即可使之启用。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#LoadModule remoteip_module modules/mod_remoteip.so</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><h3 id="apache-2-2-x" tabindex="-1"><a class="header-anchor" href="#apache-2-2-x"><span>Apache 2.2.x</span></a></h3><p><code>Apache 2.2.x</code> 版本没有自带该模块，需要手动安装。首先下载这个基于 <code>Apache 2.4.1</code> 移植的 <code>mod_remoteip</code> 模块文件。如果是 <code>Apache</code> 高版本安装则下载对应版本（版本不同安装可能会报错）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>wget &lt;https://raw.githubusercontent.com/ttkzw/mod_remoteip-httpd22/master/mod_remoteip.c&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装 <code>httpd-devel</code> 和 <code>gcc</code> 编译器以便稍后可以通过 <code>apxs</code> 扩展工具安装 <code>Apache</code> 模块。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>yum -y install httpd-devel gcc gcc-c++</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>运行下面命令安装 <code>mod_remoteip</code> 模块（其中参数选项含义可查阅此文档）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>apxs -i -a -c mod_remoteip.c</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="创建-httpd-remoteip-conf-配置文件" tabindex="-1"><a class="header-anchor" href="#创建-httpd-remoteip-conf-配置文件"><span>创建 httpd-remoteip.conf 配置文件</span></a></h2><p>在 <code>Apache</code> 扩展目录下创建 <code>remoteip</code> 配置文件。之前有介绍如何查看 <code>Apache</code> 目录路径。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>vi /www/server/apache/conf/extra/httpd-remoteip.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>使用 <code>RemoteIPProxiesHeader</code> 从指定字段获取信任 CDN IP，这样不用设置指定代理 IP。更多 <code>Apache mod_remoteip</code> 选项参数介绍可参考<a href="https://httpd.apache.org/docs/2.4/mod/mod_remoteip.html" target="_blank" rel="noopener noreferrer">[这个文档]</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>RemoteIPHeader X-Forwarded-For</span></span>
<span class="line"><span>RemoteIPProxiesHeader X-Forwarded-By</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编辑-httpd-conf-配置文件" tabindex="-1"><a class="header-anchor" href="#编辑-httpd-conf-配置文件"><span>编辑 httpd.conf 配置文件</span></a></h3><p>先确认 <code>httpd.conf</code> 里已设置加载 <code>mod_remoteip</code> 模块，参数如下。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>LoadModule remoteip_module modules/mod_remoteip.so</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在其下面添加一句，以链接上步创建的 <code>mod_remoteip</code> 配置文件。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Include conf/extra/httpd-remoteip.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>再在文件里修改记录日志格式，使之记录访客 IP。搜索下面两行内容。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b \\&quot;%{Referer}i\\&quot; \\&quot;%{User-Agent}i\\&quot;&quot; combined</span></span>
<span class="line"><span>LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b&quot; common</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>将里面的 %h 改为 %a（完整格式选项可查看此文档），修改后的内容如下。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>LogFormat &quot;%a %l %u %t \\&quot;%r\\&quot; %&gt;s %b \\&quot;%{Referer}i\\&quot; \\&quot;%{User-Agent}i\\&quot;&quot; combined</span></span>
<span class="line"><span>LogFormat &quot;%a %l %u %t \\&quot;%r\\&quot; %&gt;s %b&quot; common</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>保存文件修改，<code>/etc/init.d/httpd restart</code> 重启服务生效。</p><h2 id="cloudflare" tabindex="-1"><a class="header-anchor" href="#cloudflare"><span>CloudFlare</span></a></h2><p>在 <code>Apache</code> 扩展目录下创建 <code>remoteip</code> 配置文件。之前有介绍如何查看 <code>Apache</code> 目录路径。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>vi /www/server/apache/conf/extra/httpd-remoteip.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>内容如下。首行指定代理 IP <code>Header</code>名，次行设置信任的 IP 地址和范围（多个用空格隔开。CloudFlare CDN IP 列表可<a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">在这获取</a>）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>RemoteIPHeader X-Forwarded-For</span></span>
<span class="line"><span>RemoteIPInternalProxy 173.245.48.0/20 103.21.244.0/22 ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果要添加的 CDN IP 太多，可用 <code>RemoteIPInternalProxyList</code> 指向一个 IP 列表文件（里面用空格或换行分隔）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>RemoteIPHeader X-Forwarded-For</span></span>
<span class="line"><span>RemoteIPInternalProxyList conf/cloudflare_ip.lst</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果用这种方式可以使用下面的脚本</p><details class="hint-container details"><summary>自动更新 CloudFlare CDN IP 脚本</summary><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># !/usr/bin/env bash</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;# CloudFlare Proxy IP;&quot; &gt; /usr/local/apache/conf/cloudflare_ip.lst;</span></span>
<span class="line"><span>for i in \`curl https://www.cloudflare.com/ips-v4\`; do</span></span>
<span class="line"><span>    echo &quot;$i&quot; &gt;&gt; /usr/local/apache/conf/cloudflare_ip.lst;</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span>for i in \`curl https://www.cloudflare.com/ips-v6\`; do</span></span>
<span class="line"><span>    echo &quot;$i&quot; &gt;&gt; /usr/local/apache/conf/cloudflare_ip.lst;</span></span>
<span class="line"><span>done</span></span>
<span class="line"><span>echo &quot;# End;&quot; &gt;&gt; /usr/local/apache/conf/cloudflare_ip.lst;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建后 <code>chmod +x ./update_cloudflare_ip.sh</code> 赋予脚本可执行权限。然后 <code>crontab -e</code> 添加定期任务，例如每月 1 号凌晨 5 点 30 运行更新。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>30 5 1 ** /bin/bash /root/update_cloudflare_ip.sh 2&gt;&amp;1 &gt; /dev/null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></details><div style="text-align:right;"><p>参考 <a href="https://www.hostarr.com/apache-mod_remoteip/" target="_blank" rel="noopener noreferrer">主机指南</a></p></div>`,39)]))}const r=s(t,[["render",l]]),o=JSON.parse('{"path":"/views/tech-sharing/linux/apache-mod_remoteip.html","title":"使用CDN后 Apache 获取访问用户的真实 IP","lang":"zh-CN","frontmatter":{"title":"使用CDN后 Apache 获取访问用户的真实 IP","date":"2022-03-01T00:00:00.000Z","cover":"https://api.vlssu.com/img/?220301","tags":["Apache","CDN"],"categories":["Linux使用小知识"],"description":"当网站启用 CDN 会给获取访客 IP 带来障碍，由于多了个代理流程，故日志记录 IP 变为 CDN 的 IP。基于 Apache 的网站要解决这个问题，需要使用以下模块通过 HTTP 标头里的 X_FORWARDED_FOR 字段获取访客 IP mod_remoteip mod_rpaf mod_remoteip 模块 Apache 2.4 Apac...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用CDN后 Apache 获取访问用户的真实 IP\\",\\"image\\":[\\"https://api.vlssu.com/img/?220301\\"],\\"datePublished\\":\\"2022-03-01T00:00:00.000Z\\",\\"dateModified\\":\\"2025-05-11T03:01:03.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"飒爽师叔\\",\\"url\\":\\"https://blog.vlssu.com\\",\\"email\\":\\"vlssu@vlssu.com\\"}]}"],["meta",{"property":"og:url","content":"https://blog.vlssu.com/views/tech-sharing/linux/apache-mod_remoteip.html"}],["meta",{"property":"og:site_name","content":"师叔の小窝"}],["meta",{"property":"og:title","content":"使用CDN后 Apache 获取访问用户的真实 IP"}],["meta",{"property":"og:description","content":"当网站启用 CDN 会给获取访客 IP 带来障碍，由于多了个代理流程，故日志记录 IP 变为 CDN 的 IP。基于 Apache 的网站要解决这个问题，需要使用以下模块通过 HTTP 标头里的 X_FORWARDED_FOR 字段获取访客 IP mod_remoteip mod_rpaf mod_remoteip 模块 Apache 2.4 Apac..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://api.vlssu.com/img/?220301"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-11T03:01:03.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://api.vlssu.com/img/?220301"}],["meta",{"name":"twitter:image:alt","content":"使用CDN后 Apache 获取访问用户的真实 IP"}],["meta",{"property":"article:tag","content":"CDN"}],["meta",{"property":"article:tag","content":"Apache"}],["meta",{"property":"article:published_time","content":"2022-03-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-11T03:01:03.000Z"}]]},"git":{"createdTime":1664026496000,"updatedTime":1746932463000,"contributors":[{"name":"vlssu","username":"vlssu","email":"43847794+vlssu@users.noreply.github.com","commits":5,"url":"https://github.com/vlssu"}]},"readingTime":{"minutes":2.99,"words":896},"filePathRelative":"views/tech-sharing/linux/apache-mod_remoteip.md","excerpt":"<p>当网站启用 CDN 会给获取访客 IP 带来障碍，由于多了个代理流程，故日志记录 IP 变为 CDN 的 IP。基于 Apache 的网站要解决这个问题，需要使用以下模块通过 HTTP 标头里的 <code>X_FORWARDED_FOR</code> 字段获取访客 IP</p>\\n<ul>\\n<li>mod_remoteip</li>\\n<li>mod_rpaf</li>\\n</ul>\\n<h2>mod_remoteip 模块</h2>\\n<h3>Apache 2.4</h3>\\n<p><code>Apache 2.4</code> 开始自带此模块，可用下面命令检查。</p>\\n<div class=\\"language-lua line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"lua\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"># 查询 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">Apache</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 版本</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">etc</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">init</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.d/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">httpd</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> -</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">v</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"># 查询 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">Apache</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 编译信息（可查看 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">httpd</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.conf 配置文件等路径，之后修改要知道）</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">etc</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">init</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.d/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">httpd</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> -</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">V</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"># 列出 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">Apache</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 加载模块（里面有 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">remoteip_module</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 就说明已启用 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">mod_remoteip</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 模块）</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">etc</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">init</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.d/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">httpd</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> -</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">t</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> -</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">D</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\"> DUMP_MODULES</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"># 查看 </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">Apache</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> 选项帮助</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">etc</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">init</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.d/</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">httpd</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> -</span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">h</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{r as comp,o as data};
